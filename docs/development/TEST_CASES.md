# 空间智能部-Agent实战之路 测试用例

## 📋 测试环境
- 浏览器：Chrome/Firefox/Safari
- 建议开启开发者工具（F12）监控 Console 和 Network

---

## ✅ 第一阶段：用户注册和登录测试

### 测试用例 1.1：新用户注册（正常流程）
**步骤：**
1. 打开网站首页
2. 点击"注册"标签
3. 输入用户名：`testuser1`
4. 输入密码：`test123456`
5. 确认密码：`test123456`
6. 点击"注册"按钮

**预期结果：**
- ✅ 注册成功，自动跳转到主应用界面
- ✅ 显示用户名 "testuser1"
- ✅ 显示退出按钮

---

### 测试用例 1.2：注册验证 - 用户名过短
**步骤：**
1. 点击退出（如果已登录）
2. 点击"注册"标签
3. 输入用户名：`ab`（少于3个字符）
4. 输入密码：`test123456`
5. 确认密码：`test123456`
6. 点击"注册"按钮

**预期结果：**
- ❌ 显示错误：`用户名长度必须在3-20个字符之间`

---

### 测试用例 1.3：注册验证 - 密码过短
**步骤：**
1. 输入用户名：`testuser2`
2. 输入密码：`12345`（少于6个字符）
3. 确认密码：`12345`
4. 点击"注册"按钮

**预期结果：**
- ❌ 显示错误：`密码长度至少为6个字符`

---

### 测试用例 1.4：注册验证 - 密码不一致
**步骤：**
1. 输入用户名：`testuser2`
2. 输入密码：`password123`
3. 确认密码：`password456`
4. 点击"注册"按钮

**预期结果：**
- ❌ 显示错误：`两次输入的密码不一致`

---

### 测试用例 1.5：注册验证 - 用户名重复
**步骤：**
1. 使用已注册的用户名：`testuser1`
2. 输入密码：`test123456`
3. 确认密码：`test123456`
4. 点击"注册"按钮

**预期结果：**
- ❌ 显示错误：`用户名已存在`

---

### 测试用例 1.6：用户登录（正常流程）
**步骤：**
1. 点击退出（如果已登录）
2. 点击"登录"标签
3. 输入用户名：`testuser1`
4. 输入密码：`test123456`
5. 点击"登录"按钮

**预期结果：**
- ✅ 登录成功，跳转到主应用界面
- ✅ 显示用户名 "testuser1"

---

### 测试用例 1.7：登录验证 - 错误密码
**步骤：**
1. 输入用户名：`testuser1`
2. 输入密码：`wrongpassword`
3. 点击"登录"按钮

**预期结果：**
- ❌ 显示错误：`用户名或密码错误`

---

### 测试用例 1.8：登录验证 - 不存在的用户
**步骤：**
1. 输入用户名：`nonexistuser`
2. 输入密码：`test123456`
3. 点击"登录"按钮

**预期结果：**
- ❌ 显示错误：`用户名或密码错误`

---

## ✅ 第二阶段：日志管理功能测试

### 测试用例 2.1：创建日志（完整信息）
**前提：** 以 testuser1 身份登录

**步骤：**
1. 点击"添加日志"按钮
2. 选择日期：今天的日期
3. 选择分类：`开发`
4. 输入任务：`测试创建日志功能`
5. 输入描述：`这是一条测试日志，验证系统是否正常工作`
6. 输入时长：`2`
7. 点击"保存"按钮

**预期结果：**
- ✅ 弹窗关闭
- ✅ 日志列表中出现新创建的日志
- ✅ 显示所有输入的信息
- ✅ 统计数据更新（总时长+2小时）

---

### 测试用例 2.2：创建日志（带图片）
**步骤：**
1. 点击"添加日志"按钮
2. 填写基本信息（日期、分类、任务、描述、时长）
3. 点击"上传图片"按钮
4. 选择一张图片
5. 等待图片上传完成
6. 点击"保存"按钮

**预期结果：**
- ✅ 日志创建成功
- ✅ 日志卡片中显示缩略图
- ✅ 点击缩略图可以查看大图

---

### 测试用例 2.3：创建多条不同分类的日志
**步骤：**
创建以下日志：
1. 分类：`开发`，任务：`后端API开发`，时长：3小时
2. 分类：`调试`，任务：`修复注册bug`，时长：1小时
3. 分类：`学习`，任务：`学习Vercel部署`，时长：2小时
4. 分类：`会议`，任务：`团队周会`，时长：1小时

**预期结果：**
- ✅ 所有日志创建成功
- ✅ 按时间倒序显示
- ✅ 统计图表正确显示各分类占比
- ✅ 总时长 = 7小时

---

### 测试用例 2.4：查看日志详情
**步骤：**
1. 在日志列表中找到任意一条日志
2. 观察日志卡片显示的信息

**预期结果：**
- ✅ 显示日期
- ✅ 显示分类（带颜色标签）
- ✅ 显示任务标题
- ✅ 显示描述内容
- ✅ 显示时长
- ✅ 如有图片，显示图片缩略图

---

### 测试用例 2.5：删除日志
**步骤：**
1. 在日志列表中找到一条日志
2. 点击"删除"按钮
3. 确认删除操作

**预期结果：**
- ✅ 弹出确认对话框
- ✅ 确认后日志从列表中消失
- ✅ 统计数据自动更新
- ✅ 如果删除的是最后一条日志，显示"暂无日志"

---

### 测试用例 2.6：创建日志验证 - 缺少必填字段
**步骤：**
1. 点击"添加日志"按钮
2. 只填写任务，其他字段留空
3. 点击"保存"按钮

**预期结果：**
- ❌ 浏览器提示必填字段未填写（HTML5 验证）
- ❌ 日志不会被创建

---

### 测试用例 2.7：筛选日志（按分类）
**步骤：**
1. 在统计图表中点击某个分类（例如"开发"）

**预期结果：**
- ✅ 日志列表只显示该分类的日志
- ✅ 其他分类的日志被隐藏
- ✅ 再次点击可以取消筛选

---

## ✅ 第三阶段：管理员功能测试

### 测试用例 3.1：管理员登录
**步骤：**
1. 点击退出（如果已登录）
2. 点击"登录"标签
3. 输入用户名：`admin`
4. 输入密码：`admin123`
5. 点击"登录"按钮

**预期结果：**
- ✅ 登录成功
- ✅ 界面左上角显示"管理员视图"
- ✅ 显示用户选择下拉框
- ✅ 下拉框中列出所有注册的普通用户

---

### 测试用例 3.2：管理员查看用户列表
**前提：** 以 admin 身份登录

**步骤：**
1. 观察页面左上角的用户选择下拉框

**预期结果：**
- ✅ 下拉框默认显示"请选择用户"
- ✅ 展开下拉框，显示所有普通用户
- ✅ 每个用户显示格式：`用户名 (X条日志)`
- ✅ 列表中包含 testuser1

---

### 测试用例 3.3：管理员查看用户日志
**步骤：**
1. 在用户选择下拉框中选择 `testuser1`
2. 等待加载

**预期结果：**
- ✅ 页面标题显示：`testuser1 的日志`
- ✅ 显示该用户的所有日志
- ✅ 显示该用户的统计图表
- ✅ 显示该用户的总时长
- ✅ 管理员不能删除用户的日志（无删除按钮）

---

### 测试用例 3.4：管理员切换查看不同用户
**步骤：**
1. 查看 testuser1 的日志
2. 切换到下拉框，选择另一个用户
3. 观察页面变化

**预期结果：**
- ✅ 页面标题更新为新用户名
- ✅ 日志列表更新为新用户的日志
- ✅ 统计数据更新为新用户的数据

---

### 测试用例 3.5：管理员返回自己的视图
**步骤：**
1. 在查看用户日志时，点击下拉框
2. 选择"请选择用户"

**预期结果：**
- ✅ 返回管理员自己的日志视图
- ✅ 显示管理员自己创建的日志

---

## ✅ 第四阶段：多用户协同测试

### 测试用例 4.1：创建多个测试用户
**步骤：**
注册以下用户：
1. 用户名：`bushanshan`，密码：`test123456`
2. 用户名：`liuyang`，密码：`test123456`
3. 用户名：`zhangsan`，密码：`test123456`

**预期结果：**
- ✅ 所有用户注册成功

---

### 测试用例 4.2：不同用户创建日志
**步骤：**
1. 以 `bushanshan` 登录，创建 2-3 条日志
2. 退出，以 `liuyang` 登录，创建 2-3 条日志
3. 退出，以 `zhangsan` 登录，创建 2-3 条日志

**预期结果：**
- ✅ 每个用户只能看到自己的日志
- ✅ 用户之间的数据完全隔离

---

### 测试用例 4.3：管理员查看所有用户
**步骤：**
1. 以 `admin` 登录
2. 打开用户选择下拉框

**预期结果：**
- ✅ 下拉框中显示所有用户：
  - testuser1 (X条日志)
  - bushanshan (X条日志)
  - liuyang (X条日志)
  - zhangsan (X条日志)
- ✅ 日志数量准确

---

### 测试用例 4.4：管理员逐个查看用户日志
**步骤：**
1. 选择 `bushanshan`，查看其日志
2. 选择 `liuyang`，查看其日志
3. 选择 `zhangsan`，查看其日志

**预期结果：**
- ✅ 每次切换都显示正确的用户日志
- ✅ 日志内容与该用户创建的内容一致
- ✅ 统计数据准确

---

## ✅ 第五阶段：持久化和刷新测试

### 测试用例 5.1：刷新页面（已登录用户）
**步骤：**
1. 以任意用户登录
2. 创建一些日志
3. 按 F5 刷新页面

**预期结果：**
- ✅ 页面刷新后自动登录（不需要重新输入密码）
- ✅ 所有日志数据保持不变
- ✅ 统计数据保持不变

---

### 测试用例 5.2：关闭浏览器后重新打开
**步骤：**
1. 以任意用户登录
2. 关闭浏览器标签页
3. 重新打开网站

**预期结果：**
- ✅ 自动登录到之前的账号
- ✅ 数据完整保留

---

### 测试用例 5.3：清除浏览器缓存后
**步骤：**
1. 以任意用户登录
2. 清除浏览器缓存和 Cookies
3. 刷新页面

**预期结果：**
- ✅ 返回登录页面（因为 token 被清除）
- ✅ 重新登录后，所有数据仍然存在

---

## ✅ 第六阶段：图片功能测试

### 测试用例 6.1：上传单张图片
**步骤：**
1. 创建日志时点击"上传图片"
2. 选择一张图片（建议 < 5MB）
3. 等待转换完成
4. 保存日志

**预期结果：**
- ✅ 图片成功显示在日志中
- ✅ 可以点击查看大图
- ✅ 大图清晰可见

---

### 测试用例 6.2：上传多张图片
**步骤：**
1. 创建日志时上传第一张图片
2. 再次点击上传，添加第二张、第三张图片
3. 保存日志

**预期结果：**
- ✅ 所有图片都显示在日志中
- ✅ 每张图片都可以单独查看
- ✅ 每张图片都可以单独删除

---

### 测试用例 6.3：删除上传的图片
**步骤：**
1. 在添加日志界面上传图片
2. 点击图片上的删除按钮
3. 保存日志

**预期结果：**
- ✅ 图片从预览中消失
- ✅ 保存后的日志不包含该图片

---

## ✅ 第七阶段：边界情况测试

### 测试用例 7.1：极长文本
**步骤：**
1. 创建日志，在描述中输入非常长的文本（例如 1000 个字符）
2. 保存

**预期结果：**
- ✅ 保存成功
- ✅ 日志卡片正常显示（可能需要滚动）
- ✅ 文本不会导致布局错乱

---

### 测试用例 7.2：特殊字符
**步骤：**
1. 在任务或描述中输入特殊字符：`<script>alert('test')</script>`
2. 保存

**预期结果：**
- ✅ 保存成功
- ✅ 特殊字符被正确转义显示
- ❌ 不会执行 JavaScript 代码（安全性）

---

### 测试用例 7.3：未来日期
**步骤：**
1. 创建日志，选择未来的日期
2. 保存

**预期结果：**
- ✅ 允许保存（系统不限制未来日期）
- ✅ 日志按日期倒序排列时位置正确

---

### 测试用例 7.4：大量日志性能测试
**步骤：**
1. 创建 50+ 条日志
2. 观察页面加载和滚动性能

**预期结果：**
- ✅ 页面加载流畅
- ✅ 滚动无明显卡顿
- ✅ 统计图表正确渲染

---

## ✅ 第八阶段：退出和安全测试

### 测试用例 8.1：正常退出
**步骤：**
1. 点击"退出"按钮
2. 确认退出

**预期结果：**
- ✅ 返回登录页面
- ✅ 用户数据不再显示
- ✅ 无法访问日志界面

---

### 测试用例 8.2：退出后尝试访问
**步骤：**
1. 退出登录
2. 在浏览器地址栏直接访问网站

**预期结果：**
- ✅ 显示登录页面
- ✅ 无法看到其他用户数据

---

### 测试用例 8.3：普通用户无法访问管理员功能
**步骤：**
1. 以普通用户（testuser1）登录
2. 观察界面

**预期结果：**
- ❌ 不显示"管理员视图"
- ❌ 不显示用户选择下拉框
- ✅ 只能看到自己的数据

---

## 📊 测试结果记录表

| 测试用例 | 状态 | 备注 |
|---------|------|------|
| 1.1 新用户注册 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 1.2 用户名过短 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 1.3 密码过短 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 1.4 密码不一致 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 1.5 用户名重复 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 1.6 用户登录 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 1.7 错误密码 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 1.8 不存在的用户 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 2.1 创建日志 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 2.2 创建带图片日志 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 2.3 多条不同分类 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 2.4 查看日志详情 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 2.5 删除日志 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 2.6 缺少必填字段 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 2.7 筛选日志 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 3.1 管理员登录 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 3.2 查看用户列表 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 3.3 查看用户日志 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 3.4 切换用户 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 3.5 返回管理员视图 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 4.1 创建多个用户 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 4.2 不同用户创建日志 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 4.3 管理员查看所有用户 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 4.4 逐个查看用户日志 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 5.1 刷新页面 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 5.2 关闭浏览器重开 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 5.3 清除缓存 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 6.1 上传单张图片 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 6.2 上传多张图片 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 6.3 删除图片 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 7.1 极长文本 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 7.2 特殊字符 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 7.3 未来日期 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 7.4 大量日志性能 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 8.1 正常退出 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 8.2 退出后尝试访问 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |
| 8.3 普通用户权限 | ⬜ 未测试 / ✅ 通过 / ❌ 失败 |  |

---

## 🎯 核心测试路径（快速验证）

如果时间有限，至少完成以下核心测试：

1. ✅ **测试用例 1.1** - 注册新用户
2. ✅ **测试用例 1.6** - 用户登录
3. ✅ **测试用例 2.1** - 创建日志
4. ✅ **测试用例 2.5** - 删除日志
5. ✅ **测试用例 3.1** - 管理员登录
6. ✅ **测试用例 3.3** - 管理员查看用户日志
7. ✅ **测试用例 4.2** - 多用户数据隔离
8. ✅ **测试用例 5.1** - 刷新页面持久化

---

## 🐛 发现问题如何反馈

如果测试中发现问题，请记录：
1. 测试用例编号
2. 具体操作步骤
3. 预期结果 vs 实际结果
4. 浏览器控制台的错误信息（如有）
5. 截图（如有必要）

---

## ✨ 特别关注的原始需求

根据你最初的问题：
> "两个同事注册了新账号分别是bushanshan和liuyang，但管理员账号看不到他们"

### 关键验证测试：
1. 让你的两位同事 bushanshan 和 liuyang 重新注册账号
2. 他们各自创建几条日志
3. 用 admin 账号登录
4. 在用户选择下拉框中确认能看到：
   - bushanshan (X条日志)
   - liuyang (X条日志)
5. 分别选择他们，查看他们的日志

**这个测试通过，就说明最初的问题彻底解决了！** 🎉
