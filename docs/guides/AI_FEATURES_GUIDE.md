# 🤖 AI 功能使用指南

## 📋 目录
1. [功能概述](#功能概述)
2. [配置 API Key](#配置-api-key)
3. [AI 辅助写日志](#ai-辅助写日志)
4. [AI 生成周报](#ai-生成周报)
5. [AI 智能分析](#ai-智能分析)
6. [常见问题](#常见问题)
7. [费用说明](#费用说明)

---

## 功能概述

空间智能部-Agent实战之路 集成了 Claude AI（Anthropic）的强大能力，提供以下智能功能：

| 功能 | 说明 | 使用场景 |
|------|------|---------|
| 🖋️ **AI 辅助写日志** | 输入简要描述，AI 扩展为详细专业的日志 | 快速记录，节省写作时间 |
| 📊 **AI 生成周报** | 基于本周所有日志自动生成专业周报 | 汇报工作，总结进展 |
| 📈 **AI 智能分析** | 分析工作模式，提供效率改进建议 | 优化时间管理，提升效率 |
| 🏷️ **AI 分类建议** | 智能推荐日志分类 | 规范分类，便于统计 |

---

## 配置 API Key

### 步骤 1：获取 Claude API Key

1. **访问 Anthropic Console**
   - 网址：https://console.anthropic.com/
   - 注册并登录账号

2. **创建 API Key**
   - 点击左侧菜单 **"API Keys"**
   - 点击 **"Create Key"** 按钮
   - 输入名称（如：`my-journal`）
   - 复制生成的 API Key（格式：`sk-ant-api03-...`）
   - ⚠️ **重要**：API Key 只显示一次，请立即保存

3. **充值账户**
   - 点击 **"Settings" → "Billing"**
   - 添加信用卡
   - 充值至少 $5（推荐 $20）

### 步骤 2：在系统中配置

1. **登录 空间智能部-Agent实战之路**
   - 使用你的用户名和密码登录

2. **进入 AI 设置**
   - 点击右上角橙色的 **"🤖 AI设置"** 按钮
   - 或访问：`你的网站/ai-settings.html`

3. **保存 API Key**
   - 在输入框中粘贴你的 API Key
   - 点击 **"保存 API Key"** 按钮
   - 看到 "✅ API Key 保存成功" 提示

4. **验证配置**
   - 页面会显示 "✅ 已配置 API Key"
   - 显示部分掩码的 Key（如：`sk-ant-ap...xyz`）

### 安全说明

- ✅ API Key 使用 AES-256 加密存储在数据库
- ✅ 仅用于调用 AI 功能，不会泄露
- ✅ 多设备自动同步（同一账号）
- ✅ 可随时删除或更新

---

## AI 辅助写日志

### 使用场景

当你想快速记录工作，但不想花太多时间组织语言时，AI 辅助写日志功能可以：
- 将简短的描述扩展为详细的日志
- 优化语言表达，使其更专业
- 补充细节，突出关键要点

### 使用步骤

1. **点击"添加日志"按钮**
   - 在主页面点击 **"添加日志"**

2. **填写基本信息**
   - 选择日期
   - 选择分类（如：开发、调试等）
   - 输入简要的任务描述

3. **输入简要内容**
   - 在 **"详细内容"** 框中输入简短的描述
   - 例如：
     ```
     今天修复了用户注册的bug，之前密码加密有问题
     ```

4. **点击 AI 辅助按钮**
   - 点击 **"✨ AI 辅助写日志"** 按钮
   - 等待 2-5 秒

5. **AI 生成结果**
   - 描述框会自动填充 AI 扩展后的内容
   - 例如：
     ```
     今天我主要解决了用户注册模块中的一个关键bug。经过排查，发现问题出在密码加密环节：
     之前使用的bcrypt模块在Vercel部署环境下存在兼容性问题，导致原生二进制模块无法正常运行。
     我将其替换为纯JavaScript实现的bcryptjs，完美解决了这个问题。修复后重新测试，
     用户注册功能运行正常，密码加密安全性得到保证。这次bug修复让我更深入地理解了
     不同部署环境对依赖包的要求。
     ```

6. **编辑和保存**
   - 如果需要，可以手动修改 AI 生成的内容
   - 点击 **"保存"** 按钮

### 最佳实践

✅ **建议**：
- 输入至少 2-3 句话的简要描述
- 包含关键动作词（实现、修复、优化等）
- 说明具体做了什么

❌ **避免**：
- 仅输入一两个词（如：`写代码`）
- 没有任何上下文的描述

### 示例对比

| 你的输入 | AI 扩展后 |
|---------|-----------|
| 写了一个登录功能 | 今天我实现了系统的用户登录功能。包括前端登录表单的开发，使用 HTML 和 JavaScript 完成了用户交互逻辑；后端方面，创建了 /api/auth/login 接口，实现了密码验证和 JWT token 生成... |
| 开会讨论了新需求 | 今天参加了产品需求评审会议，团队讨论了下个迭代的核心功能。会上明确了三个主要需求方向：用户体验优化、性能提升和新功能开发... |

---

## AI 生成周报

### 使用场景

每周需要汇报工作时，AI 可以：
- 自动汇总本周所有日志
- 生成结构化的专业周报
- 分析工作量和重点
- 提出下周计划建议

### 使用步骤

1. **切换到周报标签**
   - 点击顶部的 **"📊 周报"** 标签

2. **选择周次**
   - 在下拉框中选择要生成周报的周次
   - 例如：`2026-01-20 至 2026-01-26`

3. **点击 AI 生成按钮**
   - 点击 **"🤖 AI 生成周报"** 按钮
   - 等待 5-10 秒（处理时间取决于日志数量）

4. **查看 AI 周报**
   - AI 会生成包含以下部分的周报：
     - **本周工作总结** - 3-5 句话概括
     - **重点工作详述** - 2-3 项重要工作
     - **工作量分析** - 基于时长和分类
     - **遇到的问题** - 识别挑战
     - **下周计划** - 合理延续

5. **导出周报**
   - 点击 **"导出周报"** 按钮保存为文本文件

### 周报示例

```markdown
# 本周工作总结

本周主要完成了用户认证系统的重构工作，将后端从localStorage迁移到PostgreSQL数据库。
同时修复了多个关键bug，包括密码加密兼容性问题和自动登录显示错误。
此外，还新增了密码管理功能，提升了系统的安全性和用户体验。

## 重点工作详述

### 1. 后端数据库迁移
完成了从localStorage到PostgreSQL的完整迁移，实现了真正的多用户系统。
创建了7个API端点，涵盖用户认证、日志管理和管理员功能。

### 2. Bug修复与优化
解决了bcrypt兼容性问题，替换为bcryptjs；修复了自动登录时用户名不显示的bug...

## 工作量分析
- 总工作时长：32小时
- 开发：18小时（56%）
- 调试：8小时（25%）
- 文档：6小时（19%）

## 下周计划
1. 继续优化用户体验
2. 添加数据分析功能
3. 编写测试用例
```

---

## AI 智能分析

### 使用场景

想了解自己的工作模式和效率时，AI 智能分析可以：
- 分析最近 30 天的工作数据
- 识别工作强度和时间分配
- 发现潜在问题
- 提供个性化改进建议

### 使用步骤

1. **进入周报页面**
   - 点击顶部的 **"📊 周报"** 标签

2. **点击智能分析**
   - 点击 **"📊 AI 智能分析"** 按钮
   - 弹出分析窗口

3. **等待分析完成**
   - AI 会分析最近 30 天的数据
   - 处理时间：10-15 秒

4. **查看分析报告**
   - 报告包含：
     - **工作强度分析** - 评估工作量是否合理
     - **时间分配评估** - 各类工作占比
     - **工作模式洞察** - 发现规律
     - **潜在问题识别** - 不平衡之处
     - **改进建议** - 3-5 条具体建议

### 分析报告示例

```markdown
# 工作分析报告（最近30天）

## 工作强度分析
您最近30天的总工作时长为156小时，日均5.2小时。这个工作强度处于中等偏高水平，
整体节奏较为健康。但注意到部分日期（如1月15日）工作时长超过10小时，
建议关注工作负荷的波动。

## 时间分配评估
- 开发工作占比56%（87小时）- 核心工作时间合理
- 调试占比28%（44小时）- 略高，可能需要优化代码质量
- 学习占比10%（16小时）- 建议增加学习时间投入
- 会议占比6%（9小时）- 占比适中

## 改进建议
1. **减少调试时间**：考虑增加代码审查和单元测试
2. **固定学习时间**：每周安排2-3小时学习新技术
3. **工作日程优化**：避免单日超过8小时的高强度工作
4. **效率工具**：使用AI辅助功能可节省30%写日志时间
```

---

## 常见问题

### Q1: API Key 安全吗？
**A**: 非常安全
- 使用 AES-256 加密存储
- 传输过程使用 HTTPS
- 仅用于调用 AI 功能
- 可随时删除

### Q2: AI 功能必须使用吗？
**A**: 不是必须的
- AI 功能完全可选
- 不配置 API Key 也能正常使用系统
- 所有基础功能不受影响

### Q3: API Key 会在多设备同步吗？
**A**: 会
- 存储在云端数据库
- 同一账号自动同步
- 换设备无需重新配置

### Q4: 忘记 API Key 怎么办？
**A**: 无法找回，但可以：
- 在 Anthropic Console 中删除旧 Key
- 创建新的 API Key
- 在系统中重新保存

### Q5: AI 生成的内容准确吗？
**A**: 需要人工审核
- AI 会尽力保持准确，但可能有误
- 建议手动检查和修改
- 特别是技术细节和数字

### Q6: 每次 AI 调用都收费吗？
**A**: 是的
- 按 token 数量计费
- 一次辅助写日志：约 $0.01-0.03
- 一次生成周报：约 $0.05-0.15
- 一次智能分析：约 $0.10-0.30

### Q7: 余额不足会怎样？
**A**: AI 功能暂停
- 返回错误提示
- 其他功能正常使用
- 充值后自动恢复

### Q8: 可以使用其他 AI 吗？
**A**: 目前仅支持 Claude
- 未来可能支持 GPT-4、文心一言等
- 敬请期待

---

## 费用说明

### Claude API 定价（参考）

| 模型 | 输入 | 输出 | 推荐场景 |
|------|------|------|---------|
| Claude 3.5 Sonnet | $3 / 1M tokens | $15 / 1M tokens | 推荐使用（性价比高）|
| Claude 3 Opus | $15 / 1M tokens | $75 / 1M tokens | 最强但贵 |
| Claude 3 Haiku | $0.25 / 1M tokens | $1.25 / 1M tokens | 最便宜但质量一般 |

**系统默认使用**：Claude 3.5 Sonnet

### 实际使用成本估算

| 功能 | 每次约消耗 | 每次约花费 |
|------|-----------|-----------|
| AI 辅助写日志 | 200-500 tokens | $0.01-0.03 |
| AI 生成周报 | 1500-3000 tokens | $0.05-0.15 |
| AI 智能分析 | 3000-6000 tokens | $0.10-0.30 |

**月度成本估算**：
- 轻度使用（每周2-3次）：$2-5/月
- 中度使用（每天1-2次）：$10-20/月
- 重度使用（每天5+次）：$30-50/月

### 节省费用小贴士

1. **按需使用** - 不是每条日志都需要 AI 辅助
2. **精简输入** - 输入的文本越长，消耗越多
3. **批量操作** - 一次生成周报比多次辅助更划算
4. **设置预算** - 在 Anthropic Console 设置月度预算提醒

---

## 🎯 最佳实践总结

### 推荐工作流程

1. **每天工作时**
   - 快速记录关键点（2-3 句话）
   - 需要时使用 AI 辅助扩展

2. **每周五下午**
   - 使用 AI 生成本周周报
   - 手动修改和补充

3. **每月底**
   - 使用 AI 智能分析
   - 根据建议调整下月计划

### 使用建议

- ✅ 将 AI 作为辅助工具，不是替代
- ✅ 保持对内容的审核和控制
- ✅ 结合人工判断使用 AI 建议
- ✅ 定期查看 API 使用量和费用

---

## 📞 技术支持

如遇问题，请：
1. 查看本文档常见问题部分
2. 检查 Anthropic Console 的使用量和余额
3. 查看浏览器控制台的错误信息
4. 联系系统管理员

---

**最后更新**: 2026-01-30
**版本**: v2.1.0
**状态**: ✅ 功能稳定可用
